(function(t){function e(e){for(var a,i,o=e[0],u=e[1],c=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var u=n[o];0!==s[u]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={index:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="../../plugins_packages/elan-ev/Unterrichtsplanung/app/views/index/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2375:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"spinner"},[n("div",{staticClass:"bounce1"}),n("div",{staticClass:"bounce2"}),n("div",{staticClass:"bounce3"})]):t._e()},s=[],r={name:"Spinner",props:{show:Boolean},watch:{show:function(){this.hideSpinner()}},methods:{hideSpinner:function(){var t=this;setTimeout((function(){t.$emit("done")}),2e3)}}},i=r,o=n("2877"),u=Object(o["a"])(i,a,s,!1,null,null,null);e["a"]=u.exports},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i={name:"app"},o=i,u=n("2877"),c=Object(u["a"])(o,s,r,!1,null,null,null),l=c.exports,d=n("2f62"),m=n("bc3a"),p=n.n(m);a["a"].use(d["a"]);var h=new d["a"].Store({state:{plan:{attributes:{name:"",metadata:{typeOfSchool:"",gradeLevel:"",subject:"",topic:"",date:"",time:""}}},plans:[],infos:[],interdeps:{1:{2:!1,3:!1,4:!1,5:!1,6:!1},2:{1:!1,3:!1,4:!1,5:!1,6:!1},3:{1:!1,2:!1,4:!1,5:!1,6:!1},4:{1:!1,2:!1,3:!1,5:!1,6:!1},5:{1:!1,2:!1,3:!1,4:!1,6:!1},6:{1:!1,2:!1,3:!1,4:!1,5:!1}}},getters:{interdeps:function(t){return t.interdeps},plan:function(t){return t.plan},plans:function(t){return t.plans},infos:function(t){return t.infos}},mutations:{plan:function(t,e){t.plan=e},clearPlan:function(t){t.plan={attributes:{name:"",metadata:{typeOfSchool:"",gradeLevel:"",subject:"",topic:"",date:"",time:""}}}}},actions:{interdeps:function(t,e){p.a.get("./api/plans/"+e+"/interdeps").then((function(e){var n=e.data;t.state.interdeps=n}))},plan:function(t,e){p.a.get("./api/plans/"+e+"/interdeps").then((function(e){var n=e.data;t.state.plan=n}))},plans:function(t){p.a.get("./api/plans").then((function(e){var n=e.data;t.state.plans=n.data}))},infos:function(t){p.a.get("./api/infotexts").then((function(e){var n=e.data;t.state.infos=n.data}))}}}),f=h,v=(n("ac6a"),n("8c4f")),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._m(0),n("div",{staticClass:"content-wrapper"},[n("nav",{directives:[{name:"show",rawName:"v-show",value:Object.keys(this.plans).length>0,expression:"Object.keys(this.plans).length > 0"}],staticClass:"homebox homebox-wide plans"},[n("header",[t._v("Plan bearbeiten")]),n("div",{staticClass:"homebox-content"},t._l(this.plans,(function(e){return n("router-link",{key:e.id,attrs:{to:"/plan/"+e.id}},[n("p",{staticClass:"homebox-link"},[t._v(" "+t._s(e.attributes.name)+" "),n("span",{staticClass:"homebox-link-subtitle"},[t._v(" - "+t._s(t.getPlanTemplateName(e.attributes.templates_id))+" ")]),n("br"),n("span",{staticClass:"homebox-link-subtitle plan-mkdate"},[t._v(" erstellt am: "+t._s(t.getFromatedDate(e.attributes.mkdate))+" ")]),n("br"),n("span",{staticClass:"homebox-link-subtitle plan-chdate"},[t._v(" geändert am: "+t._s(t.getFromatedDate(e.attributes.chdate))+" ")])])])})),1)]),n("nav",{staticClass:"homebox add-plan",class:{"homebox-small":Object.keys(this.plans).length>0,"homebox-fullwidth":0===Object.keys(this.plans).length}},[n("header",[t._v("Plan hinzufügen")]),n("div",{staticClass:"homebox-content"},[n("router-link",{attrs:{to:"/addplan/1"}},[n("p",{staticClass:"homebox-link"},[t._v("Bildungswissenschaftlich")])]),n("router-link",{attrs:{to:"/addplan/2"}},[n("p",{staticClass:"homebox-link"},[t._v("Fachdidaktik Mathematik")])]),n("router-link",{attrs:{to:"/addplan/3"}},[n("p",{staticClass:"homebox-link"},[t._v("Fachdidaktik Sport")])]),n("router-link",{attrs:{to:"/addplan/4"}},[n("p",{staticClass:"homebox-link"},[t._v("Fachdidaktik Geologie")])])],1)]),n("InfoBox",{attrs:{structureId:t.structureId,structureName:t.structureName}})],1)])},b=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("span",{staticClass:"nav home"})])}],x=(n("8e6e"),n("456d"),n("bd86")),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"infobox-wrapper"},[n("h3",{staticClass:"header"},[t._v(t._s(t.structureName))]),n("div",{staticClass:"infobox-content"},[t.infoText?n("p",{domProps:{innerHTML:t._s(t.infoText)}}):n("p",{staticClass:"infobox-nodata"},[t._v("Informationen konnten nicht geladen werden.")])])])},w=[];n("7514"),n("c5f6");function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(x["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={props:{structureId:Number,structureName:String},computed:S({},Object(d["b"])(["infos"]),{infoText:function(){var t=this,e=this.infos.find((function(e){return e.attributes.structures_id==t.structureId}));return void 0!=e&&""!=e.attributes.text&&e.attributes.text}})},E=C,N=Object(u["a"])(E,_,w,!1,null,null,null),T=N.exports,y={methods:{getPlanTemplateName:function(t){var e="";switch(t){case"1":e="Bildungswissenschaftlich";break;case"2":e="Fachdidaktik Mathematik";break;case"3":e="Fachdidaktik Sport";break;case"4":e="Fachdidaktik Geologie";break}return e},getFromatedDate:function(t){var e=new Date(t),n=e.getDate(),a=e.getMonth()+1;return n<10&&(n="0"+n),a<10&&(a="0"+a),n+"."+a+"."+e.getFullYear()}}};function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(x["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j={name:"Home",mixins:[y],components:{InfoBox:T},computed:k({},Object(d["b"])(["plans","infos"])),data:function(){return{structureId:-1,structureName:"Auswählen oder Erstellen"}},mounted:function(){this.$store.dispatch("plans"),this.$store.dispatch("infos")}},$=j,B=Object(u["a"])($,g,b,!1,null,null,null),P=B.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},L=[],z={},F=z,A=Object(u["a"])(F,D,L,!1,null,null,null),R=A.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-plan"},[t.newplan?n("h1",[n("a",{attrs:{href:"#"},on:{click:function(e){return t.leave("/")}}},[n("span",{staticClass:"nav home"})]),t._v(" / Plan hinzufügen ")]):n("h1",[n("a",{attrs:{href:"#"},on:{click:function(e){return t.leave("/")}}},[n("span",{staticClass:"nav home"})]),t._v(" / "),n("a",{attrs:{href:"#"},on:{click:function(e){return t.leave("/plan/"+t.$store.state.plan.id)}}},[t._v(t._s(this.$store.state.plan.attributes.name)+" ")]),t._v(" / Plan bearbeiten ")]),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"plan-metadata"},[n("form",{staticClass:"default",on:{submit:function(e){return e.preventDefault(),t.storePlan(e)}}},[n("fieldset",[t.newplan?n("legend",{staticClass:"plan-metadata-header"},[t._v(" "+t._s(t.getPlanTemplateName(this.$route.params.planType))+" ")]):n("legend",{staticClass:"plan-metadata-header"},[t._v(" "+t._s(t.templatesName)+" ")]),n("label",[n("span",{staticClass:"required"},[t._v(" Plantitel ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.planName,expression:"planName"}],class:{invalid:t.errors.planName},attrs:{type:"text",name:"planName"},domProps:{value:t.planName},on:{change:function(e){t.changed=!0},input:function(e){e.target.composing||(t.planName=e.target.value)}}}),t.errors.planName?n("span",{staticClass:"plan-error"},[t._v("Bitte geben Sie einen Plantitel ein.")]):t._e()]),n("label",[n("span",{staticClass:"required"},[t._v(" Schulform ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.plan.attributes.metadata.typeOfSchool,expression:"plan.attributes.metadata.typeOfSchool"}],class:{invalid:t.errors.typeOfSchool},attrs:{type:"text",name:"typeOfSchool"},domProps:{value:t.plan.attributes.metadata.typeOfSchool},on:{change:function(e){t.changed=!0},input:function(e){e.target.composing||t.$set(t.plan.attributes.metadata,"typeOfSchool",e.target.value)}}}),t.errors.typeOfSchool?n("span",{staticClass:"plan-error"},[t._v("Bitte geben Sie eine Schulform an.")]):t._e()]),n("label",[n("span",{staticClass:"required"},[t._v(" Klassenstufe ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.plan.attributes.metadata.gradeLevel,expression:"plan.attributes.metadata.gradeLevel"}],class:{invalid:t.errors.gradeLevel},attrs:{type:"text",name:"gradeLevel"},domProps:{value:t.plan.attributes.metadata.gradeLevel},on:{change:function(e){t.changed=!0},input:function(e){e.target.composing||t.$set(t.plan.attributes.metadata,"gradeLevel",e.target.value)}}}),t.errors.gradeLevel?n("span",{staticClass:"plan-error"},[t._v("Bitte geben Sie die Klassenstufe an.")]):t._e()]),n("label",[n("span",{staticClass:"required"},[t._v(" Fach ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.plan.attributes.metadata.subject,expression:"plan.attributes.metadata.subject"}],class:{invalid:t.errors.subject},attrs:{type:"text",name:"subject"},domProps:{value:t.plan.attributes.metadata.subject},on:{change:function(e){t.changed=!0},input:function(e){e.target.composing||t.$set(t.plan.attributes.metadata,"subject",e.target.value)}}}),t.errors.subject?n("span",{staticClass:"plan-error"},[t._v("Bitte geben Sie das Fach an.")]):t._e()]),n("label",[n("span",{staticClass:"required"},[t._v(" Thema der Unterrichtsstunde ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.plan.attributes.metadata.topic,expression:"plan.attributes.metadata.topic"}],class:{invalid:t.errors.topic},attrs:{type:"text",name:"topic"},domProps:{value:t.plan.attributes.metadata.topic},on:{change:function(e){t.changed=!0},input:function(e){e.target.composing||t.$set(t.plan.attributes.metadata,"topic",e.target.value)}}}),t.errors.topic?n("span",{staticClass:"plan-error"},[t._v("Bitte geben Sie das Thema der Unterrichtsstunde ein.")]):t._e()]),n("label",[n("span",{staticClass:"required"},[t._v(" Datum ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.plan.attributes.metadata.date,expression:"plan.attributes.metadata.date"}],class:{invalid:t.errors.date},attrs:{type:"date",name:"date"},domProps:{value:t.plan.attributes.metadata.date},on:{change:function(e){t.changed=!0},input:function(e){e.target.composing||t.$set(t.plan.attributes.metadata,"date",e.target.value)}}}),t.errors.date?n("span",{staticClass:"plan-error"},[t._v("Bitte geben Sie ein Datum ein.")]):t._e()]),n("label",[n("span",{staticClass:"required"},[t._v(" Uhrzeit ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.plan.attributes.metadata.time,expression:"plan.attributes.metadata.time"}],class:{invalid:t.errors.time},attrs:{type:"time",name:"time"},domProps:{value:t.plan.attributes.metadata.time},on:{change:function(e){t.changed=!0},input:function(e){e.target.composing||t.$set(t.plan.attributes.metadata,"time",e.target.value)}}}),t.errors.time?n("span",{staticClass:"plan-error"},[t._v("Bitte geben Sie eine Uhrzeit ein.")]):t._e()])]),n("footer",{staticClass:"plan-metadata-buttons"},[n("button",{staticClass:"button accept"},[t._v("Plan speichern")]),t.newplan?t._e():n("button",{staticClass:"button cancel",on:{click:function(e){return t.leave("/plan/"+t.$store.state.plan.id)}}},[t._v("Abbrechen")]),t.newplan?t._e():n("button",{staticClass:"button button-remove",on:{click:t.removePlan}},[t._v("Plan löschen")]),t.newplan?n("button",{staticClass:"button cancel",on:{click:function(e){return t.leave("/")}}},[t._v("zurück zur Planübersicht")]):t._e()])])]),n("InfoBox",{attrs:{structureId:t.structureId,structureName:t.structureName}})],1)])},J=[];n("7f7f");function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){Object(x["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K={name:"EditPlan",mixins:[y],props:["newplan"],components:{InfoBox:T},computed:Z({},Object(d["b"])(["plan"]),{structureId:function(){return this.newplan?-2:-4},structureName:function(){return this.newplan?"Einen Plan erstellen":"Einen Plan bearbeiten"}}),data:function(){return{errors:{planName:!1,typeOfSchool:!1,gradeLevel:!1,subject:!1,topic:!1,date:!1,time:!1},templatesName:"",planName:"",changed:!1,origPlan:{}}},beforeMount:function(){this.newplan?this.$store.commit("clearPlan"):(this.planName=this.plan.attributes.name,this.templatesName=this.getPlanTemplateName(this.plan.attributes.templates_id),this.origPlan=this.plan)},watch:{metadata:{deep:!0,handler:function(t){this.fieldsValid()}},planName:function(t){""!=t.trim()&&(this.errors.planName=!1)}},methods:{storePlan:function(){return this.newplan?this.createPlan():this.putPlan()},fieldsValid:function(){var t=this.plan.attributes;for(var e in this.errors.planName=""==this.planName.trim(),this.errors.typeOfSchool=""==t.metadata.typeOfSchool.trim(),this.errors.gradeLevel=""==t.metadata.gradeLevel.trim(),this.errors.subject=""==t.metadata.subject.trim(),this.errors.topic=""==t.metadata.topic.trim(),this.errors.date=""==t.metadata.date.trim(),this.errors.time=""==t.metadata.time.trim(),this.errors)if(this.errors[e])return!1;return!0},createPlan:function(){if(!this.fieldsValid())return!1;var t=this.plan.attributes,e=this;p.a.post("./api/plans",{templates_id:this.$route.params.planType,name:this.planName,metadata:JSON.stringify(t.metadata)}).then((function(t){var n=t.data.id;e.$router.push({path:"/plan/"+n})})).catch((function(t){console.log(t)}))},putPlan:function(){if(!this.fieldsValid())return!1;var t=this.plan.attributes,e=this;p.a.put("./api/plans/"+t.id,{templates_id:t.templates_id,name:this.planName,metadata:JSON.stringify(t.metadata)}).then((function(){e.plan.attributes.name=e.planName,e.$router.push({path:"/plan/"+t.id})})).catch((function(t){console.log(t)}))},removePlan:function(){confirm("Möchten Sie diesen Plan wirklich löschen?")&&p.a.delete("./api/plans/"+this.plan.attributes.id).then((function(){this.$router.push({path:"/"})})).catch((function(t){return console.log(t)}))},leave:function(t){this.changed?confirm("Möchten Sie das Bearbeiten wirklich verlassen? Ihre Änderungen werden nicht gespeichert.")&&(this.$store.commit("plan",this.origPlan),this.$router.push({path:t})):this.$router.push({path:t})}}},q=K,U=Object(u["a"])(q,M,J,!1,null,null,null),G=U.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overview"},[n("h1",[n("router-link",{attrs:{to:"/"}},[n("span",{staticClass:"nav home"})]),t._v(" / "+t._s(t.plan.attributes.name)+" ")],1),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"overview-boxes"},[n("OverviewBox",{attrs:{title:"situative Voraussetzungen",structures_id:1,catName:"situation",planId:t.plan.id}}),n("OverviewBox",{attrs:{title:"individuelle Voraussetzungen",structures_id:2,catName:"individual",planId:t.plan.id}}),n("OverviewBox",{attrs:{title:"Intentionalität",structures_id:3,catName:"intention",planId:t.plan.id}}),n("OverviewBox",{attrs:{title:"Inhalt",structures_id:4,catName:"content",planId:t.plan.id}}),n("OverviewBox",{attrs:{title:"Methodik",structures_id:5,catName:"method",planId:t.plan.id}}),n("OverviewBox",{attrs:{title:"Medien",structures_id:6,catName:"media",planId:t.plan.id}})],1),n("div",{staticClass:"box-wrapper"},[n("ToolBox"),n("InfoBox",{attrs:{structureId:t.structureId,structureName:t.structureName}})],1)])])},Y=[],Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbox-wrapper"},[n("h3",[t._v("Aktionen")]),n("div",{staticClass:"tools"},[n("router-link",{attrs:{to:"/editplan/"+t.plan.id}},[n("span",{staticClass:"toolbox-edit",attrs:{title:"Plan bearbeiten"}})]),n("router-link",{attrs:{to:"/editschedule/"+t.plan.id}},[n("span",{staticClass:"toolbox-schedule",attrs:{title:"Verlaufsplan bearbeiten"}})]),n("a",{attrs:{href:"api/export/pdf/"+this.plan.id,target:"_blank"}},[n("span",{staticClass:"toolbox-pdf",attrs:{title:this.plan.attributes.name+" als PDF exportieren"}})]),n("a",{attrs:{href:"api/export/doc/"+this.plan.id,target:"_blank"}},[n("span",{staticClass:"toolbox-doc",attrs:{title:this.plan.attributes.name+" als DOC exportieren"}})]),n("a",{attrs:{href:"api/export/plain/"+this.plan.id,target:"_blank"}},[n("span",{staticClass:"toolbox-plain",attrs:{title:this.plan.attributes.name+" als unformatierten Text exportieren"}})])],1)])},W=[],X={name:"ToolBox",computed:{plan:function(){return this.$store.state.plan}}},tt=X,et=Object(u["a"])(tt,Q,W,!1,null,null,null),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"overview-box-link",attrs:{to:"/plan/"+t.planId+"/"+t.catName}},[n("div",{staticClass:"overview-box",class:t.catName},[n("h1",[t._v(t._s(t.title))]),n("InterdepComputedBox",{attrs:{structures_id:t.structures_id}})],1)])},st=[],rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"interdepbox-wrapper interdepcomputedbox-wrapper"},[t.title?n("h3",{class:["interdep-title-type-"+t.structures_id]},[t._v(t._s(t.title))]):t._e(),n("div",{staticClass:"interdeps"},t._l(t.interdeps_computed,(function(t,e){return n("button",{key:e,class:[{"interdep-disabled":0==t,"interdep-pending":"pending"==t},"interdep-type-"+e]})})),0)])},it=[];function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){Object(x["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct={name:"InterdepComputedBox",props:{structures_id:Number,title:String},computed:ut({},Object(d["b"])(["interdeps","plan"]),{interdeps_computed:function(){var t=this;if(void 0===this.interdeps)return[];var e={};return Object.keys(this.interdeps[this.structures_id]).forEach((function(n){var a=t.interdeps[t.structures_id][n],s=t.interdeps[n][t.structures_id];e[n]=!(!a||!s)||!(!a||s)&&"pending"})),e}})},lt=ct,dt=Object(u["a"])(lt,rt,it,!1,null,null,null),mt=dt.exports,pt={name:"OverviewBox",components:{InterdepComputedBox:mt},props:{title:String,catName:String,structures_id:Number,planId:String}},ht=pt,ft=Object(u["a"])(ht,at,st,!1,null,null,null),vt=ft.exports,gt={name:"Overview",components:{InfoBox:T,ToolBox:nt,OverviewBox:vt},data:function(){return{structureName:"Planübersicht",structureId:-3}},mounted:function(){this.$store.dispatch("interdeps",this.plan.id)},computed:{plan:function(){return this.$store.state.plan}}},bt=gt,xt=Object(u["a"])(bt,H,Y,!1,null,null,null),_t=xt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan-situation"},[n("h1",[n("router-link",{attrs:{to:"/"}},[n("span",{staticClass:"nav home"})]),t._v(" / "),n("router-link",{attrs:{to:"/plan/"+t.plan.id}},[t._v(t._s(t.plan.attributes.name)+" ")]),t._v(" / situative Voraussetzungen ")],1),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"content-container"},[t._l(t.elements,(function(e){return n("NoteElement",{key:e.id,attrs:{element:e},on:{removeElement:t.updateElements,changeElement:t.changeElement,resetInfo:t.resetInfo,setInfo:t.setInfo}})})),n("NoteElementAdder",{attrs:{structures_id:t.structureId,elementList:t.elementList},on:{addElement:t.updateElements}}),n("Summary",{attrs:{structureName:t.structureName,structureId:t.structureId,structureText:t.structureText}})],2),n("div",{staticClass:"box-wrapper"},[n("InterdepBox",{attrs:{structures_id:t.structureId,title:"Interdependenzen"}}),n("InfoBox",{attrs:{structureId:t.infoBoxStructureId,structureName:t.infoBoxStructureName}})],1)])])},It=[],St=(n("55dd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"interdepbox-wrapper"},[t.title?n("h3",{class:["interdep-title-type-"+t.structures_id]},[t._v(t._s(t.title))]):t._e(),n("div",{staticClass:"interdeps"},t._l(t.interdeps[t.structures_id],(function(e,a){return n("button",{key:a,class:[{"interdep-disabled":!e},"interdep-type-"+a],on:{click:function(n){return t.switchInterdep(a,e)}}})})),0)])}),Ct=[];function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){Object(x["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tt={name:"InterdepBox",props:{structures_id:Number,title:String},computed:Nt({},Object(d["b"])(["interdeps","plan"])),mounted:function(){this.$store.dispatch("interdeps",this.plan.id)},methods:{switchInterdep:function(t,e){var n=this,a=this;this.interdeps[this.structures_id][t]=!e,p.a.put("./api/interdeps/"+a.$store.state.plan.id+"/"+a.structures_id,{references:JSON.stringify(a.interdeps[this.structures_id])}).then((function(){})).catch((function(s){console.log(s),a.interdeps[n.structures_id][t]=!e}))}}},yt=Tt,Ot=Object(u["a"])(yt,St,Ct,!1,null,null,null),kt=Ot.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"note-element-wrapper",class:{unfolded:t.unfolded}},[n("div",{staticClass:"note-element",class:{unfolded:t.unfolded}},[n("header",{staticClass:"note-element-title"},[n("span",{staticClass:"note-element-toggle",class:{unfolded:t.unfolded,folded:!t.unfolded},on:{click:t.toggleElement}},[t._v(" "+t._s(t.element.name)+" ")]),n("spinner",{attrs:{show:t.showSpinner},on:{done:function(e){t.showSpinner=!1}}}),n("span",{staticClass:"note-element-toolbar"},[n("button",{staticClass:"copy",attrs:{title:"Inhalt in die Zwischenablage kopieren"},on:{click:t.copyElement}}),t.noRemove?t._e():n("button",{staticClass:"remove",attrs:{title:"Textfeld löschen"},on:{click:t.removeElement}})])],1),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.element.attributes.text,expression:"element.attributes.text"},{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],ref:"noteText",staticClass:"note-element-content",domProps:{value:t.element.attributes.text},on:{blur:function(e){return t.autoSave()},keyup:function(e){return t.countChars()},focus:function(e){return t.$emit("setInfo",{id:t.element.attributes.structures_id,name:t.element.name})},input:function(e){e.target.composing||t.$set(t.element.attributes,"text",e.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],staticClass:"note-element-char-counter",attrs:{title:"Anzahl der Zeichen"}},[t._v(t._s(t.charCounter))])])},$t=[],Bt=(n("a481"),n("2375")),Pt={name:"NoteElement",components:{Spinner:Bt["a"]},props:{element:Object,noRemove:Boolean},data:function(){return{charCounter:0,unfolded:!0,showSpinner:!1}},mounted:function(){this.countChars()},methods:{autoSave:function(){var t=this;this.$emit("resetInfo"),p.a.put("./api/textfields/"+t.element.id,{structures_id:t.element.attributes.structures_id,text:t.element.attributes.text,plans_id:this.$store.state.plan.id}).then((function(){t.$emit("changeElement",{id:t.element.id,text:t.element.attributes.text}),t.showSpinner=!0})).catch((function(t){return console.log(t)}))},removeElement:function(){var t=this;console.log("remove element"),confirm("Möchten Sie das Textfeld "+t.element.name+" wirklich löschen?")&&p.a.delete("./api/textfields/"+t.element.id,{structures_id:t.element.attributes.structures_id,plans_id:this.$store.state.plan.id}).then((function(){t.$emit("removeElement",t.element.id)})).catch((function(t){return console.log(t)}))},countChars:function(){var t=this.$refs.noteText.value;t=t.replace(/\n/g,""),this.charCounter=t.length},toggleElement:function(){this.unfolded=!this.unfolded},copyElement:function(){var t=this.element.attributes.text;t=this.element.name+"\n"+t,navigator.clipboard.writeText(t).then((function(){}),(function(t){console.log(t)}))}}},Dt=Pt,Lt=Object(u["a"])(Dt,jt,$t,!1,null,null,null),zt=Lt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"note-element-adder"},[n("button",{staticClass:"add-note",class:{active:t.showAdder},on:{click:t.toggleAdderButton}},[n("span",{staticClass:"add-note-icon"}),n("span",{staticClass:"add-note-text"},[t._v("Textfeld hinzufügen")])]),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.showAdder,expression:"showAdder"}],staticClass:"note-element-list"},t._l(t.elementList,(function(e){return n("li",{key:e.id,class:{"inactive-element":!e.add},on:{click:function(n){return t.addElement(e)}}},[t._v(" "+t._s(e.attributes.name)+" ")])})),0)])},At=[],Rt={name:"NoteElementAdder",props:{elementList:Array,structures_id:Number},data:function(){return{showAdder:!1}},methods:{addElement:function(t){if(t.add){var e=this;p.a.post("./api/textfields",{structures_id:t.id,text:"",plans_id:e.$store.state.plan.id}).then((function(){e.$emit("addElement",t.id),e.toggleAdderButton()})).catch((function(t){console.log(t)}))}},toggleAdderButton:function(){this.showAdder?this.showAdder=!1:this.showAdder=!0}}},Mt=Rt,Jt=Object(u["a"])(Mt,Ft,At,!1,null,null,null),Vt=Jt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"note-element-wrapper"},[n("div",{staticClass:"note-element"},[n("header",{staticClass:"note-element-title summary-title"},[n("span",[t._v("Zusammenfassung für "+t._s(t.structureName))]),n("spinner",{attrs:{show:t.showSpinner},on:{done:function(e){t.showSpinner=!1}}}),n("button",{staticClass:"summary-copy-all",attrs:{title:"Mit Inhalten aus Textfeldern befüllen"},on:{click:t.insertFromTextfields}})],1),n("textarea",{ref:"summaryText",staticClass:"note-element-content",domProps:{value:t.summaryElement.text}})]),n("div",{staticClass:"note-element-char-counter",attrs:{title:"Anzahl der Zeichen"}},[t._v(t._s(t.charCounter))])])},Kt=[],qt={name:"Summary",components:{Spinner:Bt["a"]},props:{structureName:String,structureId:Number,structureText:String},data:function(){return{wysiwyg:Object,charCounter:0,summaryElement:Object,showSpinner:!1}},mounted:function(){this.getSummary()},methods:{initCKE:function(){var t=this;STUDIP.wysiwyg.replace(t.$refs.summaryText);var e=CKEDITOR.instances[t.$refs.summaryText.id];e.on("blur",(function(){t.autoSave(e.getData())})),e.on("change",(function(){t.countChars()}))},getSummary:function(){var t=this;p.a.get("./api/summary/"+t.$store.state.plan.id+"/"+t.structureId).then((function(e){e.data.data.length>0?(t.summaryElement=e.data.data[0].attributes,t.charCounter=t.summaryElement.text.replace(/<[^>]*>/g,"").replace(/\r?\n|\r/g,"").replace(/&nbsp;/g,"").length,t.initCKE()):t.createSummary()})).catch((function(t){return t}))},createSummary:function(){var t=this;p.a.post("./api/summary",{structures_id:t.structureId,text:"",plans_id:t.$store.state.plan.id}).then((function(e){t.summaryElement=e.data,t.initCKE()})).catch((function(t){console.log(t)}))},autoSave:function(t){var e=this;p.a.put("./api/summary/"+e.summaryElement.id,{structures_id:e.structureId,text:t,plans_id:e.$store.state.plan.id}).then((function(){e.showSpinner=!0})).catch((function(t){console.log(t)}))},countChars:function(){var t=CKEDITOR.instances[this.$refs.summaryText.id],e=t.getData();e=e.replace(/<[^>]*>/g,"").replace(/\r?\n|\r/g,"").replace(/&nbsp;/g,""),this.charCounter=e.length},insertFromTextfields:function(){if(confirm("Möchten Sie den Inhalt aus allen Textfeldern einfügen? Der aktuelle Inhalt wird überschrieben!")){var t=CKEDITOR.instances[this.$refs.summaryText.id];t.setData(this.structureText),this.autoSave(t.getData())}}}},Ut=qt,Gt=Object(u["a"])(Ut,Zt,Kt,!1,null,null,null),Ht=Gt.exports,Yt={name:"Situation",components:{InfoBox:T,InterdepBox:kt,NoteElement:zt,NoteElementAdder:Vt,Summary:Ht},data:function(){return{elementList:[],elements:[],structureName:"situative Voraussetzungen",structureId:1,structureText:"",infoBoxStructureId:1,infoBoxStructureName:""}},computed:{plan:function(){return this.$store.state.plan}},mounted:function(){this.getStructures(),this.resetInfo()},methods:{updateElements:function(){this.getStructures()},changeElement:function(t){var e=this.elements.find((function(e){return e.attributes.id==t.id}));e.attributes.text=t.text,this.getElementsText()},getStructures:function(){var t=this;p.a.get("./api/structures/"+this.structureId).then((function(e){var n=e.data.data;n.forEach((function(t){t.add=!0})),t.elementList=n,t.getElements()})).catch((function(t){console.log(t)}))},getElements:function(){var t=this,e=[],n=[];this.elementList.forEach((function(n){return e.push(p.a.get("./api/textfields/"+t.plan.id+"/"+n.id))})),p.a.all(e).then((function(e){e.forEach((function(e){if(e.data.data.length>0){var a=e.data.data[0],s=t.elementList.find((function(t){return t.id==a.attributes.structures_id}));a.name=s.attributes.name,s.add=!1,n.push(a)}})),n.sort((function(t,e){return t.attributes.id>e.attributes.id?1:e.attributes.id>t.attributes.id?-1:void 0})),t.elements=n,t.getElementsText()}))},getElementsText:function(){var t="";this.elements.forEach((function(e){t=t+"<h3>"+e.name+"</h3>",t=t+"<p>"+e.attributes.text+"</p><br>"})),this.structureText=t},resetInfo:function(){this.infoBoxStructureId=this.structureId,this.infoBoxStructureName=this.structureName},setInfo:function(t){this.infoBoxStructureId=parseInt(t.id),this.infoBoxStructureName=t.name}}},Qt=Yt,Wt=Object(u["a"])(Qt,wt,It,!1,null,null,null),Xt=Wt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan-individual"},[n("h1",[n("router-link",{attrs:{to:"/"}},[n("span",{staticClass:"nav home"})]),t._v(" / "),n("router-link",{attrs:{to:"/plan/"+t.plan.id}},[t._v(t._s(t.plan.attributes.name)+" ")]),t._v(" / individuelle Voraussetzungen ")],1),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"content-container"},[t._l(t.elements,(function(e){return n("NoteElement",{key:e.id,attrs:{element:e},on:{removeElement:t.updateElements,changeElement:t.changeElement,resetInfo:t.resetInfo,setInfo:t.setInfo}})})),n("NoteElementAdder",{attrs:{structures_id:t.structureId,elementList:this.elementList},on:{addElement:t.updateElements}}),n("Summary",{attrs:{structureName:t.structureName,structureId:t.structureId,structureText:t.structureText}})],2),n("div",{staticClass:"box-wrapper"},[n("InterdepBox",{attrs:{structures_id:t.structureId,title:"Interdependenzen"}}),n("InfoBox",{attrs:{structureId:t.infoBoxStructureId,structureName:t.infoBoxStructureName}})],1)])])},ee=[],ne={name:"Individual",components:{InfoBox:T,InterdepBox:kt,NoteElement:zt,NoteElementAdder:Vt,Summary:Ht},data:function(){return{elementList:[],elements:[],structureName:"individuelle Voraussetzungen",structureId:2,structureText:"",infoBoxStructureId:this.structureId,infoBoxStructureName:this.structureName}},computed:{plan:function(){return this.$store.state.plan}},mounted:function(){this.getStructures(),this.resetInfo()},methods:{updateElements:function(){this.getStructures()},changeElement:function(t){var e=this.elements.find((function(e){return e.attributes.id==t.id}));e.attributes.text=t.text,this.getElementsText()},getStructures:function(){var t=this;p.a.get("./api/structures/"+this.structureId).then((function(e){t.elementList=e.data.data,t.elementList.forEach((function(t){t.add=!0})),t.getElements()})).catch((function(t){console.log(t)}))},getElements:function(){var t=this,e=[],n=[];this.elementList.forEach((function(n){return e.push(p.a.get("./api/textfields/"+t.plan.id+"/"+n.id))})),p.a.all(e).then((function(e){e.forEach((function(e){if(e.data.data.length>0){var a=e.data.data[0],s=t.elementList.find((function(t){return t.id==a.attributes.structures_id}));a.name=s.attributes.name,s.add=!1,n.push(a)}})),n.sort((function(t,e){return t.attributes.id>e.attributes.id?1:e.attributes.id>t.attributes.id?-1:void 0})),t.elements=n,t.getElementsText()}))},getElementsText:function(){var t="";this.elements.forEach((function(e){t=t+"<h3>"+e.name+"</h3>",t=t+"<p>"+e.attributes.text+"</p><br>"})),this.structureText=t},resetInfo:function(){this.infoBoxStructureId=this.structureId,this.infoBoxStructureName=this.structureName},setInfo:function(t){this.infoBoxStructureId=parseInt(t.id),this.infoBoxStructureName=t.name}}},ae=ne,se=Object(u["a"])(ae,te,ee,!1,null,null,null),re=se.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan-intention"},[n("h1",[n("router-link",{attrs:{to:"/"}},[n("span",{staticClass:"nav home"})]),t._v("/ "),n("router-link",{attrs:{to:"/plan/"+t.plan.id}},[t._v(t._s(t.plan.attributes.name))]),t._v("/ Intentionalität ")],1),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"content-container"},[t._l(t.elements,(function(e){return n("IndicativeTarget",{key:e.id,attrs:{element:e},on:{removeElement:t.removeIndicativeElement,setDefaultInfo:t.resetInfo,setInfo:t.setInfo,structureText:t.setIndicativeStructureTexts}})})),n("div",{staticClass:"note-element-adder"},[n("button",{staticClass:"add-note",on:{click:t.addIndicativeTarget}},[n("span",{staticClass:"add-note-icon"}),n("span",{staticClass:"add-note-text"},[t._v("Richtziel hinzufügen")])])]),n("Summary",{attrs:{structureName:t.structureName,structureId:t.structureId,structureText:t.structureText}})],2),n("div",{staticClass:"box-wrapper"},[n("InterdepBox",{attrs:{structures_id:t.structureId,title:"Interdependenzen"}}),n("InfoBox",{attrs:{structureId:t.infoBoxStructureId,structureName:t.infoBoxStructureName}})],1)])])},oe=[],ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"target-wrapper indicative-target",class:{unfolded:t.unfolded}},[n("div",{staticClass:"note-element-wrapper",class:{unfolded:t.unfolded}},[n("div",{staticClass:"note-element",class:{unfolded:t.unfolded}},[n("header",{staticClass:"note-element-title"},[n("span",{staticClass:"note-element-toggle",class:{unfolded:t.unfolded,folded:!t.unfolded},on:{click:t.toggleElement}},[t._v(" "+t._s(t.elementName)+" ")]),n("spinner",{attrs:{show:t.showSpinner},on:{done:function(e){t.showSpinner=!1}}}),n("span",{staticClass:"note-element-toolbar"},[n("button",{staticClass:"copy",attrs:{title:"Inhalt in die Zwischenablage kopieren"},on:{click:t.copyElement}}),n("button",{staticClass:"remove",attrs:{title:"Textfeld löschen"},on:{click:t.removeElement}})])],1),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.element.attributes.text,expression:"element.attributes.text"},{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],ref:"noteText",staticClass:"note-element-content",domProps:{value:t.element.attributes.text},on:{blur:t.autoSave,keyup:t.countChars,focus:function(e){return t.$emit("setInfo",{id:t.element.attributes.structures_id,name:t.elementName})},input:function(e){e.target.composing||t.$set(t.element.attributes,"text",e.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],staticClass:"note-element-char-counter",attrs:{title:"Anzahl der Zeichen"}},[t._v(t._s(t.charCounter))])]),t._l(t.currentCoarseTargets,(function(e){return n("CoarseTarget",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],key:e.id,attrs:{element:e,parentId:t.element.id},on:{removeElement:t.removeCoarseElement,setDefaultInfo:function(e){return t.$emit("setDefaultInfo")},setInfo:t.setInfo,structureText:t.setCoarseStructureTexts}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],staticClass:"note-element-adder"},[n("button",{staticClass:"add-note",on:{click:t.addCoarseTarget}},[n("span",{staticClass:"add-note-icon"}),n("span",{staticClass:"add-note-text"},[t._v("Grobziel hinzufügen")])])])],2)},ce=[],le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"target-wrapper coarse-target",class:{unfolded:t.unfolded}},[n("div",{staticClass:"note-element-wrapper",class:{unfolded:t.unfolded}},[n("div",{staticClass:"note-element",class:{unfolded:t.unfolded}},[n("header",{staticClass:"note-element-title"},[n("span",{staticClass:"note-element-toggle",class:{unfolded:t.unfolded,folded:!t.unfolded},on:{click:t.toggleElement}},[t._v(" "+t._s(t.elementName)+" ")]),n("spinner",{attrs:{show:t.showSpinner},on:{done:function(e){t.showSpinner=!1}}}),n("span",{staticClass:"note-element-toolbar"},[n("button",{staticClass:"copy",attrs:{title:"Inhalt in die Zwischenablage kopieren"},on:{click:t.copyElement}}),n("button",{staticClass:"remove",attrs:{title:"Textfeld löschen"},on:{click:t.removeElement}})])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],staticClass:"target-metadata-box"},[n("label",{attrs:{for:"dimension"}},[t._v("Dimension")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.dimension,expression:"dimension"}],attrs:{name:"dimension"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.dimension=e.target.multiple?n:n[0]},t.autoSave]}},[n("option",{attrs:{value:"kognitiv"}},[t._v("kognitiv")]),n("option",{attrs:{value:"affektiv"}},[t._v("affektiv")]),n("option",{attrs:{value:"psychomotorisch"}},[t._v("psychomotorisch")])])]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.element.attributes.text,expression:"element.attributes.text"},{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],ref:"noteText",staticClass:"note-element-content",domProps:{value:t.element.attributes.text},on:{blur:t.autoSave,keyup:t.countChars,focus:function(e){return t.$emit("setInfo",{id:t.element.attributes.structures_id,name:t.elementName})},input:function(e){e.target.composing||t.$set(t.element.attributes,"text",e.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],staticClass:"note-element-char-counter",attrs:{title:"Anzahl der Zeichen"}},[t._v(t._s(t.charCounter))])]),t._l(t.currentFineTargets,(function(e){return n("FineTarget",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],key:e.id,attrs:{element:e,parentId:t.element.id},on:{removeElement:t.removeFineElement,setDefaultInfo:function(e){return t.$emit("setDefaultInfo")},setInfo:t.setInfo,structureText:t.setFineStructureTexts}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],staticClass:"note-element-adder"},[n("button",{staticClass:"add-note",on:{click:t.addFineTarget}},[n("span",{staticClass:"add-note-icon"}),n("span",{staticClass:"add-note-text"},[t._v("Feinziel hinzufügen")])])])],2)},de=[],me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"target-wrapper fine-target",class:{unfolded:t.unfolded}},[n("div",{staticClass:"note-element-wrapper",class:{unfolded:t.unfolded}},[n("div",{staticClass:"note-element",class:{unfolded:t.unfolded}},[n("header",{staticClass:"note-element-title"},[n("span",{staticClass:"note-element-toggle",class:{unfolded:t.unfolded,folded:!t.unfolded},on:{click:t.toggleElement}},[t._v(" "+t._s(t.elementName)+" ")]),n("spinner",{attrs:{show:t.showSpinner},on:{done:function(e){t.showSpinner=!1}}}),n("span",{staticClass:"note-element-toolbar"},[n("button",{staticClass:"copy",attrs:{title:"Inhalt in die Zwischenablage kopieren"},on:{click:t.copyElement}}),n("button",{staticClass:"remove",attrs:{title:"Textfeld löschen"},on:{click:t.removeElement}})])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],staticClass:"target-metadata-box"},[n("label",{attrs:{for:"dimension"}},[t._v("Dimension")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.dimension,expression:"dimension"}],attrs:{name:"dimension"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.dimension=e.target.multiple?n:n[0]},t.changeDimension]}},[n("option",{attrs:{value:"kognitiv"}},[t._v("kognitiv")]),n("option",{attrs:{value:"affektiv"}},[t._v("affektiv")]),n("option",{attrs:{value:"psychomotorisch"}},[t._v("psychomotorisch")])]),n("label",{attrs:{for:"level"}},[t._v("Stufe")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.level,expression:"level"}],attrs:{name:"level"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.level=e.target.multiple?n:n[0]},t.autoSave]}},[t._l(t.kognitivLevels,(function(e){return n("option",{directives:[{name:"show",rawName:"v-show",value:"kognitiv"==t.dimension,expression:"dimension == 'kognitiv'"}],key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),t._l(t.affektivLevels,(function(e){return n("option",{directives:[{name:"show",rawName:"v-show",value:"affektiv"==t.dimension,expression:"dimension == 'affektiv'"}],key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),t._l(t.psychomotorischLevels,(function(e){return n("option",{directives:[{name:"show",rawName:"v-show",value:"psychomotorisch"==t.dimension,expression:"dimension == 'psychomotorisch'"}],key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2)]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.element.attributes.text,expression:"element.attributes.text"},{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],ref:"noteText",staticClass:"note-element-content",domProps:{value:t.element.attributes.text},on:{blur:function(e){return t.autoSave()},keyup:function(e){return t.countChars()},focus:function(e){return t.$emit("setInfo",{id:t.element.attributes.structures_id,name:t.elementName})},input:function(e){e.target.composing||t.$set(t.element.attributes,"text",e.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.unfolded,expression:"unfolded"}],staticClass:"note-element-char-counter",attrs:{title:"Anzahl der Zeichen"}},[t._v(t._s(t.charCounter))])])])},pe=[],he={name:"FineTarget",components:{Spinner:Bt["a"]},props:{element:Object,parentId:String},data:function(){return{charCounter:0,unfolded:!0,showSpinner:!1,structures_id:19,dimension:"",level:"",elementName:"Feinziel",kognitivLevels:["wissen","verstehen","anwenden","analysieren","synthetisieren"],affektivLevels:["affektiv_A","affektiv_B","affektiv_C"],psychomotorischLevels:["psychomotorisch_A","psychomotorisch_B","psychomotorisch_C"]}},mounted:function(){this.countChars(),this.dimension=this.metadata.dimension,this.level=this.metadata.level,this.getElementsText()},computed:{plan:function(){return this.$store.state.plan},metadata:function(){return JSON.parse(this.element.attributes.metadata)}},methods:{autoSave:function(){var t=this,e={};e.parentId=this.parentId,e.dimension=this.dimension,e.level=this.level,this.$emit("setDefaultInfo"),p.a.put("./api/textfields/"+t.element.id,{structures_id:t.structures_id,text:t.element.attributes.text,plans_id:this.$store.state.plan.id,metadata:JSON.stringify(e)}).then((function(){t.showSpinner=!0,t.getElementsText()})).catch((function(t){return console.log(t)}))},removeElement:function(){var t=this;confirm("Möchten Sie das Feinziel wirklich löschen?")&&p.a.delete("./api/textfields/"+t.element.id,{structures_id:t.structures_id,plans_id:this.$store.state.plan.id}).then((function(){t.$emit("removeElement",t.element.id)})).catch((function(t){return console.log(t)}))},countChars:function(){var t=this.$refs.noteText.value;t=t.replace(/\s/g,""),this.charCounter=t.length},toggleElement:function(){this.unfolded=!this.unfolded},copyElement:function(){var t=this.element.attributes.text;t=this.elementName+"\nDimension: "+this.dimension+"\nStufe: "+this.level+"\n"+t,navigator.clipboard.writeText(t).then((function(){}),(function(t){console.log(t)}))},changeDimension:function(){this.level="",this.autoSave()},getElementsText:function(){var t="";t=t+"<h5>"+this.elementName+"</h5>",t=t+"<h6>Dimension: "+this.dimension+"</h6>",t=t+"<h6>Stufe: "+this.level+"</h6>",t=t+"<p>"+this.element.attributes.text+"</p><br>",this.$emit("structureText",{text:t,id:this.element.id})},setInfo:function(){this.$store.state.info={id:this.structures_id,title:this.elementName}}}},fe=he,ve=Object(u["a"])(fe,me,pe,!1,null,null,null),ge=ve.exports,be={name:"CoarseTarget",components:{Spinner:Bt["a"],FineTarget:ge},props:{element:Object,parentId:String},data:function(){return{charCounter:0,unfolded:!0,showSpinner:!1,structures_id:18,currentFineTargets:[],fineTargets:[],dimension:"",elementName:"Grobziel",fineStructureTexts:[]}},mounted:function(){this.countChars(),this.getFineTargets(),this.dimension=this.metadata.dimension,this.getElementsText()},computed:{plan:function(){return this.$store.state.plan},metadata:function(){return JSON.parse(this.element.attributes.metadata)}},watch:{fineStructureTexts:{handler:function(){this.getElementsText()},deep:!0}},methods:{autoSave:function(){var t=this,e={};e.parentId=this.parentId,e.dimension=this.dimension,this.$emit("setDefaultInfo"),p.a.put("./api/textfields/"+t.element.id,{structures_id:t.structures_id,text:t.element.attributes.text,plans_id:this.$store.state.plan.id,metadata:JSON.stringify(e)}).then((function(){t.showSpinner=!0,t.getElementsText()})).catch((function(t){return console.log(t)}))},removeElement:function(){var t=this;confirm("Möchten Sie das Grobziel und alle darunter liegenden Ziele wirklich löschen?")&&p.a.delete("./api/textfields/"+t.element.id,{structures_id:t.structures_id,plans_id:this.$store.state.plan.id}).then((function(){t.$emit("removeElement",t.element.id)})).catch((function(t){return console.log(t)}))},removeFineElement:function(t){this.fineStructureTexts=this.fineStructureTexts.filter((function(e){return e.id!==t})),this.updateElements()},updateElements:function(){this.fineTargets=[],this.currentFineTargets=[],this.getFineTargets()},countChars:function(){var t=this.$refs.noteText.value;t=t.replace(/\s/g,""),this.charCounter=t.length},toggleElement:function(){this.unfolded=!this.unfolded},copyElement:function(){var t=this.dimension,e=this.element.attributes.text;e=this.elementName+"\nDimension: "+t+"\n"+e,navigator.clipboard.writeText(e).then((function(){}),(function(t){console.log(t)}))},getFineTargets:function(){var t=this;p.a.get("./api/textfields/"+t.plan.id+"/19").then((function(e){if(e.data.data.length>0){var n=e.data;n.data.forEach((function(e){t.fineTargets.push(e)})),t.getCurrentFineTargets()}})).catch((function(t){console.log(t)}))},getCurrentFineTargets:function(){var t=this;this.fineTargets.forEach((function(e){var n=JSON.parse(e.attributes.metadata);n.parentId==t.element.id&&t.currentFineTargets.push(e)}))},addFineTarget:function(){var t=this,e={};e.parentId=this.element.id,p.a.post("./api/textfields",{structures_id:19,text:"",plans_id:t.$store.state.plan.id,metadata:JSON.stringify(e)}).then((function(){t.updateElements()})).catch((function(t){return console.log(t)}))},setInfo:function(t){this.$emit("setInfo",t)},setFineStructureTexts:function(t){var e=this.fineStructureTexts.find((function(e){return e.id==t.id})),n=void 0!=e;n?e.text=t.text:(this.fineStructureTexts.push(t),this.fineStructureTexts.sort((function(t,e){return t.id>e.id?1:e.id>t.id?-1:void 0})))},getElementsText:function(){var t="<h4>"+this.elementName+"</h4>";t=t+"<h6>Dimension: "+this.dimension+"</h6>",t=t+"<p>"+this.element.attributes.text+"</p><br>",this.fineStructureTexts.forEach((function(e){t+=e.text})),this.$emit("structureText",{text:t,id:this.element.id})}}},xe=be,_e=Object(u["a"])(xe,le,de,!1,null,null,null),we=_e.exports,Ie={name:"IndicativeTarget",components:{Spinner:Bt["a"],CoarseTarget:we},props:{element:Object,fineTargets:Object},data:function(){return{charCounter:0,unfolded:!0,showSpinner:!1,structures_id:17,currentCoarseTargets:[],coarseTargets:[],elementName:"Richtziel",coarseStructureTexts:[]}},mounted:function(){this.countChars(),this.getCoarseTargets(),this.getElementsText()},computed:{plan:function(){return this.$store.state.plan}},watch:{coarseStructureTexts:{handler:function(){this.getElementsText()},deep:!0}},methods:{autoSave:function(){var t=this;this.$emit("setDefaultInfo"),p.a.put("./api/textfields/"+t.element.id,{structures_id:t.structures_id,text:t.element.attributes.text,plans_id:this.$store.state.plan.id}).then((function(){t.showSpinner=!0,t.getElementsText()})).catch((function(t){return console.log(t)}))},removeElement:function(){var t=this;confirm("Möchten Sie das Richtziel und alle darunter liegenden Ziele wirklich löschen?")&&p.a.delete("./api/textfields/"+t.element.id,{structures_id:t.structures_id,plans_id:this.$store.state.plan.id}).then((function(){t.$emit("removeElement",t.element.id)})).catch((function(t){return console.log(t)}))},removeCoarseElement:function(t){this.coarseStructureTexts=this.coarseStructureTexts.filter((function(e){return e.id!==t})),this.updateElements()},updateElements:function(){this.coarseTargets=[],this.currentCoarseTargets=[],this.getCoarseTargets()},countChars:function(){var t=this.$refs.noteText.value;t=t.replace(/\s/g,""),this.charCounter=t.length},toggleElement:function(){this.unfolded=!this.unfolded},copyElement:function(){var t=this.element.attributes.text;t=this.elementName+"\n"+t,navigator.clipboard.writeText(t).then((function(){}),(function(t){console.log(t)}))},getCoarseTargets:function(){var t=this;p.a.get("./api/textfields/"+t.plan.id+"/18").then((function(e){if(e.data.data.length>0){var n=e.data;n.data.forEach((function(e){t.coarseTargets.push(e)})),t.getCurrentCoarseTargets()}})).catch((function(t){console.log(t)}))},getCurrentCoarseTargets:function(){var t=this;this.coarseTargets.forEach((function(e){var n=JSON.parse(e.attributes.metadata);n.parentId==t.element.id&&t.currentCoarseTargets.push(e)}))},addCoarseTarget:function(){var t=this,e={};e.parentId=this.element.id,p.a.post("./api/textfields",{structures_id:18,text:"",plans_id:t.$store.state.plan.id,metadata:JSON.stringify(e)}).then((function(){t.updateElements()})).catch((function(t){return console.log(t)}))},setCoarseStructureTexts:function(t){var e=this.coarseStructureTexts.find((function(e){return e.id==t.id})),n=void 0!=e;n?e.text=t.text:(this.coarseStructureTexts.push(t),this.coarseStructureTexts.sort((function(t,e){return t.id>e.id?1:e.id>t.id?-1:void 0})))},getElementsText:function(){var t="";t=t+"<h3>"+this.elementName+"</h3>",t=t+"<p>"+this.element.attributes.text+"</p><br>",this.coarseStructureTexts.forEach((function(e){t+=e.text})),this.$emit("structureText",{text:t,id:this.element.id})},setInfo:function(t){this.$emit("setInfo",t)}}},Se=Ie,Ce=Object(u["a"])(Se,ue,ce,!1,null,null,null),Ee=Ce.exports,Ne={name:"Intention",components:{InfoBox:T,InterdepBox:kt,IndicativeTarget:Ee,Summary:Ht},data:function(){return{elements:[],structureName:"Intentionalität",structureId:3,structureText:"",indicativeStructureTexts:[],infoBoxStructureId:this.structureId,infoBoxStructureName:this.structureName}},computed:{plan:function(){return this.$store.state.plan}},watch:{indicativeStructureTexts:{handler:function(){this.getElementsText()},deep:!0}},mounted:function(){this.getIndicativeTargets(),this.resetInfo(),this.getElementsText()},methods:{removeIndicativeElement:function(t){this.indicativeStructureTexts=this.indicativeStructureTexts.filter((function(e){return e.id!==t})),this.updateElements()},updateElements:function(){this.getIndicativeTargets()},getIndicativeTargets:function(){var t=this;t.elements=[],p.a.get("./api/textfields/"+t.plan.id+"/17").then((function(e){if(e.data.data.length>0){var n=e.data;n.data.forEach((function(e){t.elements.push(e)}))}})).catch((function(t){console.log(t)}))},addIndicativeTarget:function(){var t=this;p.a.post("./api/textfields",{structures_id:17,text:"",plans_id:t.$store.state.plan.id}).then((function(){t.getIndicativeTargets()})).catch((function(t){return console.log(t)}))},setIndicativeStructureTexts:function(t){var e=this.indicativeStructureTexts.find((function(e){return e.id==t.id})),n=void 0!=e;n?e.text=t.text:(this.indicativeStructureTexts.push(t),this.indicativeStructureTexts.sort((function(t,e){return t.id>e.id?1:e.id>t.id?-1:void 0})))},getElementsText:function(){var t=this,e="";e="<h2>"+this.structureName+"</h2>",this.elements.forEach((function(n){return e+=t.indicativeStructureTexts.find((function(t){return t.id==n.id})).text})),this.structureText=e},resetInfo:function(){this.infoBoxStructureId=this.structureId,this.infoBoxStructureName=this.structureName},setInfo:function(t){this.infoBoxStructureId=parseInt(t.id),this.infoBoxStructureName=t.name}}},Te=Ne,ye=Object(u["a"])(Te,ie,oe,!1,null,null,null),Oe=ye.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan-content"},[n("h1",[n("router-link",{attrs:{to:"/"}},[n("span",{staticClass:"nav home"})]),t._v(" / "),n("router-link",{attrs:{to:"/plan/"+t.plan.id}},[t._v(t._s(t.plan.attributes.name)+" ")]),t._v(" / Inhalt ")],1),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"content-container"},[n("div",{staticClass:"plan-content-tabs"},[n("h3",{staticClass:"plan-content-tab",class:{active:!t.toggle},on:{click:function(e){t.toggle=!1,t.setInfo({id:t.technicalStructuresId,name:t.technicalStructuresName})}}},[t._v(" "+t._s(t.technicalStructuresName)+" ")]),n("h3",{staticClass:"plan-content-tab",class:{active:t.toggle},on:{click:function(e){t.toggle=!0,t.setInfo({id:t.didacticStructuresId,name:t.didacticStructuresName})}}},[t._v(" "+t._s(t.didacticStructuresName)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.toggle,expression:"!toggle"}],staticClass:"plan-content-analysis plan-content-analysis-technical"},t._l(t.elementsTechnical,(function(e){return n("NoteElement",{key:e.id,attrs:{element:e,noRemove:!0},on:{changeElement:t.changeElementTechnical,resetInfo:t.resetInfo,setInfo:t.setInfo}})})),1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.toggle,expression:"toggle"}],staticClass:"plan-content-analysis plan-content-analysis-didactic"},[t._l(t.elementsDidactic,(function(e){return n("NoteElement",{key:e.id,attrs:{element:e},on:{removeElement:t.updateElements,changeElement:t.changeElementDidactic,resetInfo:t.resetInfo,setInfo:t.setInfo}})})),n("NoteElementAdder",{attrs:{structures_id:t.didacticStructuresId,elementList:t.didacticStructures},on:{addElement:t.updateElements}})],2),n("Summary",{attrs:{structureName:t.structureName,structureId:t.structureId,structureText:t.structureText}})],1)]),n("div",{staticClass:"box-wrapper"},[n("InterdepBox",{attrs:{structures_id:t.structureId,title:"Interdependenzen"}}),n("InfoBox",{attrs:{structureId:t.infoBoxStructureId,structureName:t.infoBoxStructureName}})],1)])])},je=[],$e={name:"Content",components:{InfoBox:T,InterdepBox:kt,NoteElement:zt,NoteElementAdder:Vt,Summary:Ht},data:function(){return{toggle:!1,structureName:"Inhalt",structureId:4,elementsTechnical:[],elementsDidactic:[],contentStructures:[],technicalStructures:[],didacticStructures:[],technicalStructuresId:Number,didacticStructuresId:Number,technicalStructuresName:"",didacticStructuresName:"",structureTextTechnical:"",structureTextDidactic:"",structureText:"",infoBoxStructureId:4,infoBoxStructureName:""}},computed:{plan:function(){return this.$store.state.plan}},watch:{structureTextTechnical:function(){this.structureText=this.structureTextTechnical+this.structureTextDidactic},structureTextDidactic:function(){this.structureText=this.structureTextTechnical+this.structureTextDidactic}},created:function(){this.getContentStructures()},mounted:function(){this.resetInfo()},methods:{updateElements:function(){this.getSubstructures()},changeElementTechnical:function(t){var e=this.elementsTechnical.find((function(e){return e.attributes.id==t.id}));e.attributes.text=t.text,this.getElementsText("technical")},changeElementDidactic:function(t){var e=this.elementsDidactic.find((function(e){return e.attributes.id==t.id}));e.attributes.text=t.text,this.getElementsText("didactic")},getContentStructures:function(){var t=this;this.elementsTechnical=[],this.technicalStructures=[],p.a.get("./api/structures/4").then((function(e){e.data.data&&(e.data.data.forEach((function(e){t.contentStructures.push(e.attributes)})),t.technicalStructuresId=parseInt(t.contentStructures[0].id),t.technicalStructuresName=t.contentStructures[0].name,t.technicalStructures.push(e.data.data[0]),t.getTechnicalElement(),t.didacticStructuresId=parseInt(t.contentStructures[1].id),t.didacticStructuresName=t.contentStructures[1].name,t.getSubstructures())})).catch((function(t){console.log(t)}))},getTechnicalElement:function(){var t=this;p.a.get("./api/textfields/"+t.plan.id+"/"+t.technicalStructuresId).then((function(e){if(e.data.data.length>0){var n=e.data.data[0];n.name=t.technicalStructuresName,t.elementsTechnical.push(n),t.getElementsText("technical")}else t.createTechnical()})).catch((function(t){return console.log(t)}))},createTechnical:function(){var t=this;p.a.post("./api/textfields",{plans_id:t.plan.id,structures_id:t.technicalStructuresId,text:""}).then((function(e){t.getTechnicalElement()})).catch((function(t){console.log(t)}))},getSubstructures:function(){var t=this;this.elementsDidactic=[],this.didacticStructures=[],p.a.get("./api/structures/"+t.contentStructures[1].id).then((function(e){t.didacticStructures=e.data.data,t.didacticStructures.forEach((function(t){t.add=!0})),t.getElements(t.didacticStructures,t.elementsDidactic,"didactic")})).catch((function(t){console.log(t)}))},getElements:function(t,e,n){var a=this,s=[];t.forEach((function(t){return s.push(p.a.get("./api/textfields/"+a.plan.id+"/"+t.id))})),p.a.all(s).then((function(s){s.forEach((function(n){if(n.data.data.length>0){var a=n.data.data[0],s=t.find((function(t){return t.id==a.attributes.structures_id}));a.name=s.attributes.name,s.add=!1,e.push(a)}})),e.sort((function(t,e){return t.attributes.id>e.attributes.id?1:e.attributes.id>t.attributes.id?-1:void 0})),a.getElementsText(n)}))},getElementsText:function(t){var e="",n=[];switch(t){case"didactic":e=this.didacticStructuresName,n=this.elementsDidactic;break;case"technical":e=this.technicalStructuresName,n=this.elementsTechnical;break}var a="<h3>"+e+"</h3>";n.forEach((function(e){"didactic"==t&&(a=a+"<h4>"+e.name+"</h4>"),a=a+"<p>"+e.attributes.text+"</p><br>"})),"didactic"==t&&(this.structureTextDidactic=a),"technical"==t&&(this.structureTextTechnical=a)},resetInfo:function(){this.infoBoxStructureId=this.structureId,this.infoBoxStructureName=this.structureName},setInfo:function(t){this.infoBoxStructureId=parseInt(t.id),this.infoBoxStructureName=t.name}}},Be=$e,Pe=Object(u["a"])(Be,ke,je,!1,null,null,null),De=Pe.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan-method"},[n("h1",[n("router-link",{attrs:{to:"/"}},[n("span",{staticClass:"nav home"})]),t._v(" / "),n("router-link",{attrs:{to:"/plan/"+t.plan.id}},[t._v(t._s(t.plan.attributes.name)+" ")]),t._v(" / Methodik ")],1),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"content-container"},[t._l(t.elements,(function(e){return n("NoteElement",{key:e.id,attrs:{element:e},on:{removeElement:t.updateElements,changeElement:t.changeElement,resetInfo:t.resetInfo,setInfo:t.setInfo}})})),n("NoteElementAdder",{attrs:{structures_id:t.structureId,elementList:t.elementList},on:{addElement:t.updateElements}}),n("Summary",{attrs:{structureName:t.structureName,structureId:t.structureId,structureText:t.structureText}})],2),n("div",{staticClass:"box-wrapper"},[n("InterdepBox",{attrs:{structures_id:t.structureId,title:"Interdependenzen"}}),n("InfoBox",{attrs:{structureId:t.infoBoxStructureId,structureName:t.infoBoxStructureName}})],1)])])},ze=[],Fe={name:"Method",components:{InfoBox:T,InterdepBox:kt,NoteElement:zt,NoteElementAdder:Vt,Summary:Ht},data:function(){return{elementList:[],elements:[],structureName:"Methodik",structureId:5,structureText:"",infoBoxStructureId:5,infoBoxStructureName:""}},computed:{plan:function(){return this.$store.state.plan}},mounted:function(){this.getStructures(),this.resetInfo()},methods:{updateElements:function(){this.getStructures()},getStructures:function(){var t=this;p.a.get("./api/structures/"+this.structureId).then((function(e){t.elementList=e.data.data,t.elementList.forEach((function(t){t.add=!0})),t.getElements()})).catch((function(t){console.log(t)}))},changeElement:function(t){var e=this.elements.find((function(e){return e.attributes.id==t.id}));e.attributes.text=t.text,this.getElementsText()},getElements:function(){var t=this,e=[],n=[];this.elementList.forEach((function(n){return e.push(p.a.get("./api/textfields/"+t.plan.id+"/"+n.id))})),p.a.all(e).then((function(e){e.forEach((function(e){if(e.data.data.length>0){var a=e.data.data[0],s=t.elementList.find((function(t){return t.id==a.attributes.structures_id}));a.name=s.attributes.name,s.add=!1,n.push(a)}})),n.sort((function(t,e){return t.attributes.id>e.attributes.id?1:e.attributes.id>t.attributes.id?-1:void 0})),t.elements=n,t.getElementsText()}))},getElementsText:function(){var t="";this.elements.forEach((function(e){t=t+"<h3>"+e.name+"</h3>",t=t+"<p>"+e.attributes.text+"</p><br>"})),this.structureText=t},resetInfo:function(){this.infoBoxStructureId=this.structureId,this.infoBoxStructureName=this.structureName},setInfo:function(t){this.infoBoxStructureId=parseInt(t.id),this.infoBoxStructureName=t.name}}},Ae=Fe,Re=Object(u["a"])(Ae,Le,ze,!1,null,null,null),Me=Re.exports,Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan-media"},[n("h1",[n("router-link",{attrs:{to:"/"}},[n("span",{staticClass:"nav home"})]),t._v(" / "),n("router-link",{attrs:{to:"/plan/"+t.plan.id}},[t._v(t._s(t.plan.attributes.name)+" ")]),t._v(" / Medien ")],1),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"content-container"},[t._l(t.elements,(function(e){return n("NoteElement",{key:e.id,attrs:{element:e},on:{removeElement:t.updateElements,changeElement:t.changeElement,resetInfo:t.resetInfo,setInfo:t.setInfo}})})),n("NoteElementAdder",{attrs:{structures_id:t.structureId,elementList:t.elementList},on:{addElement:t.updateElements}}),n("Summary",{attrs:{structureName:t.structureName,structureId:t.structureId,structureText:t.structureText}})],2),n("div",{staticClass:"box-wrapper"},[n("InterdepBox",{attrs:{structures_id:t.structureId,title:"Interdependenzen"}}),n("InfoBox",{attrs:{structureId:t.infoBoxStructureId,structureName:t.infoBoxStructureName}})],1)])])},Ve=[],Ze={name:"Media",components:{InfoBox:T,InterdepBox:kt,NoteElement:zt,NoteElementAdder:Vt,Summary:Ht},data:function(){return{elementList:[],elements:[],structureName:"Medien",structureId:6,structureText:"",infoBoxStructureId:6,infoBoxStructureName:""}},computed:{plan:function(){return this.$store.state.plan}},mounted:function(){this.getStructures(),this.resetInfo()},methods:{updateElements:function(){this.getStructures()},changeElement:function(t){var e=this.elements.find((function(e){return e.attributes.id==t.id}));e.attributes.text=t.text,this.getElementsText()},getStructures:function(){var t=this;p.a.get("./api/structures/"+this.structureId).then((function(e){t.elementList=e.data.data,t.elementList.forEach((function(t){t.add=!0})),t.getElements()})).catch((function(t){console.log(t)}))},getElements:function(){var t=this,e=[],n=[];this.elementList.forEach((function(n){return e.push(p.a.get("./api/textfields/"+t.plan.id+"/"+n.id))})),p.a.all(e).then((function(e){e.forEach((function(e){if(e.data.data.length>0){var a=e.data.data[0],s=t.elementList.find((function(t){return t.id==a.attributes.structures_id}));a.name=s.attributes.name,s.add=!1,n.push(a)}})),n.sort((function(t,e){return t.attributes.id>e.attributes.id?1:e.attributes.id>t.attributes.id?-1:void 0})),t.elements=n,t.getElementsText()}))},getElementsText:function(){var t="";this.elements.forEach((function(e){t=t+"<h3>"+e.name+"</h3>",t=t+"<p>"+e.attributes.text+"</p><br>"})),this.structureText=t},resetInfo:function(){this.infoBoxStructureId=this.structureId,this.infoBoxStructureName=this.structureName},setInfo:function(t){this.infoBoxStructureId=parseInt(t.id),this.infoBoxStructureName=t.name}}},Ke=Ze,qe=Object(u["a"])(Ke,Je,Ve,!1,null,null,null),Ue=qe.exports,Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-schedule"},[n("h1",[n("a",{attrs:{href:"#"},on:{click:function(e){return t.leave("/")}}},[n("span",{staticClass:"nav home"})]),t._v(" / "),n("a",{attrs:{href:"#"},on:{click:function(e){return t.leave("/plan/"+t.$store.state.plan.id)}}},[t._v(t._s(t.plan.attributes.name)+" ")]),t._v(" / Verlaufsplan ")]),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"schedule-table-wrapper"},[n("table",{staticClass:"schedule-table"},[t._m(0),t._l(this.rows,(function(e,a){return n("ScheduleRow",{key:a,attrs:{row:e,rowId:a},on:{changeRow:t.updateRow,removeRow:t.removeRow}})}))],2),n("button",{staticClass:"button add",on:{click:t.addRow}},[t._v("Zeile hinzufügen")]),n("br"),n("button",{staticClass:"button accept",on:{click:t.storeSchedule}},[t._v("Verlaufsplan speichern")]),n("button",{staticClass:"button cancel",on:{click:function(e){return t.leave("/plan/"+t.$store.state.plan.id)}}},[t._v("zurück zur Planübersicht")])]),n("InfoBox",{attrs:{structureId:t.structureId,structureName:t.structureName}})],1)])},He=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("Zeit")]),n("th",[t._v("Phase")]),n("th",[t._v("Handlungsschritte")]),n("th",[t._v("Methodik")]),n("th",[t._v("Medien")]),n("th",{staticClass:"schedule-header-row-remove"})])}],Ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"text"},domProps:{value:t.time},on:{change:t.updateRow,input:function(e){e.target.composing||(t.time=e.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.phase,expression:"phase"}],attrs:{type:"text"},domProps:{value:t.phase},on:{change:t.updateRow,input:function(e){e.target.composing||(t.phase=e.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.step,expression:"step"}],attrs:{type:"text"},domProps:{value:t.step},on:{change:t.updateRow,input:function(e){e.target.composing||(t.step=e.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.method,expression:"method"}],attrs:{type:"text"},domProps:{value:t.method},on:{change:t.updateRow,input:function(e){e.target.composing||(t.method=e.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.media,expression:"media"}],attrs:{type:"text"},domProps:{value:t.media},on:{change:t.updateRow,input:function(e){e.target.composing||(t.media=e.target.value)}}})]),n("td",{staticClass:"schedule-cell-row-remove"},[n("button",{staticClass:"schedule-row-remove",attrs:{title:"Zeile entfernen"},on:{click:t.removeRow}})])])},Qe=[],We={name:"ScheduleRow",props:{row:{},rowId:String},data:function(){return{time:"",phase:"",step:"",method:"",media:""}},mounted:function(){this.time=this.row.time,this.phase=this.row.phase,this.step=this.row.step,this.method=this.row.method,this.media=this.row.media},methods:{updateRow:function(){var t={};t[this.rowId]={time:this.time,phase:this.phase,step:this.step,method:this.method,media:this.media},this.$emit("changeRow",t)},removeRow:function(){this.$emit("removeRow",this.rowId)}}},Xe=We,tn=Object(u["a"])(Xe,Ye,Qe,!1,null,null,null),en=tn.exports,nn={name:"Schedule",components:{ScheduleRow:en,InfoBox:T},props:{},data:function(){return{schedule:{},rows:{},structureId:-5,structureName:"Verlaufsplan",changed:!1}},computed:{plan:function(){return this.$store.state.plan}},mounted:function(){this.getSchedule()},methods:{updateRow:function(t){var e=Object.keys(t)[0];this.$set(this.rows,e,t[e]),this.changed=!0},addRow:function(){var t=0,e=parseInt(Object.keys(this.rows)[Object.keys(this.rows).length-1]);isNaN(e)||(t=e+1),this.$set(this.rows,t,{time:"",phase:"",step:"",method:"",media:""}),this.changed=!0},removeRow:function(t){this.$delete(this.rows,t),this.changed=!0},getSchedule:function(){var t=this;p.a.get("./api/plans/"+t.plan.id+"/schedules").then((function(e){0==e.data.data.length&&t.createSchedule(),e.data.data.length>0&&(t.schedule=e.data.data[0].attributes,t.rows=JSON.parse(t.schedule.content))})).catch((function(t){console.log(t)}))},createSchedule:function(){var t=this;p.a.post("./api/schedules",{content:"",plans_id:t.plan.id}).then((function(e){t.schedule=e.data})).catch((function(t){console.log(t)}))},storeSchedule:function(){var t=this,e=JSON.stringify(this.rows);p.a.put("./api/schedules/"+t.schedule.id,{content:e,plans_id:t.plan.id}).then((function(){t.$router.push({path:"/plan/"+t.plan.id})})).catch((function(t){return console.log(t)}))},leave:function(t){this.changed?confirm("Möchten Sie den Verlaufsplan wirklich verlassen? Ihre Änderungen werden nicht gespeichert.")&&this.$router.push({path:t}):this.$router.push({path:t})}}},an=nn,sn=Object(u["a"])(an,Ge,He,!1,null,null,null),rn=sn.exports;a["a"].use(v["a"]);var on=[{path:"/",component:P},{path:"/plan/:planId",component:R,children:[{path:"/",component:_t},{path:"situation",component:Xt},{path:"individual",component:re},{path:"intention",component:Oe},{path:"content",component:De},{path:"method",component:Me},{path:"media",component:Ue}]},{path:"/addplan/:planType",component:G,props:{newplan:!0}},{path:"/editplan/:planId",component:G,props:{newplan:!1}},{path:"/editschedule/:planId",component:rn}],un=new v["a"]({routes:on});un.beforeEach((function(t,e,n){if(t.params.planId)if(t.params.planId==f.state.plan.id)n();else{var a=[];p.a.get("./api/plans").then((function(e){a=e.data.data,a.forEach((function(e){if(t.params.planId==e.id)return f.state.plan=e,f.state.plan.attributes.metadata=JSON.parse(f.state.plan.attributes.metadata),!0})),n()})).catch((function(t){console.log(t)})),p.a.get("./api/infotexts").then((function(t){t.data.data.length>0?f.state.infos=t.data.data:f.state.infos=[]})).catch((function(t){return console.log(t)}))}else n()}));var cn=un;a["a"].config.productionTip=!1,new a["a"]({el:"#app",store:f,router:cn,render:function(t){return t(l)}})}});
//# sourceMappingURL=index.js.map